INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

sensor.rotary_encoder: [source common/smartv2-base.yaml:576]
  platform: rotary_encoder
  id: dial
  pin_a: 
    number: 47
    mode: 
      input: True
      output: False
      open_drain: False
      pullup: False
      pulldown: False
    inverted: False
    ignore_pin_validation_error: False
    ignore_strapping_warning: False
    drive_strength: 20.0
  pin_b: 
    number: 21
    mode: 
      input: True
      output: False
      open_drain: False
      pullup: False
      pulldown: False
    inverted: False
    ignore_pin_validation_error: False
    ignore_strapping_warning: False
    drive_strength: 20.0
  resolution: 2
  on_clockwise: 
    - then: 
        - lambda: !lambda |-
            id(dial_touched) = true;
        - if: 
            condition: 
              binary_sensor.is_off: 
                
                Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
                id: user_button
            then: 
              - script.execute: 
                  id: control_volume
                  increase_volume: True
            else: 
              - script.execute: 
                  id: control_hue
                  increase_hue: True
  on_anticlockwise: 
    - then: 
        - lambda: !lambda |-
            id(dial_touched) = true;
        - if: 
            condition: 
              binary_sensor.is_off: 
                
                Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
                id: user_button
            then: 
              - script.execute: 
script: [source common/smartv2-base.yaml:640]
  - id: control_leds
    then: 
      - 
        Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
        lambda: !lambda |-
          id(check_if_timers_active).execute();
          if (id(is_timer_active)){
            id(fetch_first_active_timer).execute();
          }
          if (id(improv_ble_in_progress)) {
            id(control_leds_improv_ble_state).execute();
          } else if (id(init_in_progress)) {
            id(control_leds_init_state).execute();
          } else if (!id(wifi_id).is_connected() || !id(api_id).is_connected()){
            id(control_leds_no_ha_connection_state).execute();
          } else if (id(user_button).state) {
            id(control_leds_center_button_touched).execute();
          } else if (id(dial_touched)) {
            id(control_leds_volume_changed).execute();
          } else if (id(timer_ringing).state) {
            id(control_leds_timer_ringing).execute();
          } else if (id(voice_assistant_phase) == 2) {
            id(control_leds_voice_assistant_waiting_for_command_phase).execute();
          } else if (id(voice_assistant_phase) == 3) {
            id(control_leds_voice_assistant_listening_for_command_phase).execute();
          } else if (id(voice_assistant_phase) == 4) {
            id(control_leds_voice_assistant_thinking_phase).execute();
          } else if (id(voice_assistant_phase) == 5) {
            id(control_leds_voice_assistant_replying_phase).execute();
          } else if (id(voice_assistant_phase) == 11) {
            id(control_leds_voice_assistant_error_phase).execute();
          } else if (id(voice_assistant_phase) == 10) {
            id(control_leds_voice_assistant_not_ready_phase).execute();
          } else if (id(is_timer_active)) {
            id(control_leds_timer_ticking).execute();
          } else if (id(voice_assistant_phase) == 1) {
            id(control_leds_voice_assistant_idle_phase).execute();
          }
    mode: single
    parameters: {}
  - id: control_leds_improv_ble_state
    then: 
      - light.turn_on: 
          brightness: 0.5
          red: 1.0
          green: 0.89
          blue: 0.71
          id: voice_assistant_leds
          effect: Twinkle
          state: True
    mode: single
    parameters: {}
  - id: control_leds_init_state
    then: 
      - if: 
          condition: 
            wifi.connected: {}
          then: 
            - light.turn_on: 
                brightness: 0.5
                red: 0.094
                green: 0.733
                blue: 0.9490000000000001
                id: voice_assistant_leds
                effect: Twinkle
                state: True
          else: 
            - light.turn_on: 
                id: voice_assistant_leds
                effect: Rainbow
                state: True
    mode: single
    parameters: {}
  - id: control_leds_no_ha_connection_state
    then: 
      - light.turn_on: 
          brightness: 0.5
          red: 1.0
          green: 0.0
          blue: 0.0
          id: voice_assistant_leds
          effect: Twinkle
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_idle_phase
    then: 
      - light.turn_off: 
          id: voice_assistant_leds
          state: False
      - if: 
          condition: 
            light.is_on: 
              id: led_ring
          then: 
            - light.turn_on: 
                id: led_ring
                state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_waiting_for_command_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Waiting for Command
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_listening_for_command_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Listening For Command
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_thinking_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Thinking
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_replying_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Replying
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_error_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          red: 1.0
          green: 0.0
          blue: 0.0
          id: voice_assistant_leds
          effect: Error
          state: True
    mode: single
    parameters: {}
  - id: control_leds_voice_assistant_not_ready_phase
    then: 
      - light.turn_on: 
          brightness: 0.66
          red: 1.0
          green: 0.0
          blue: 0.0
          id: voice_assistant_leds
          effect: Twinkle
          state: True
    mode: single
    parameters: {}
  - id: control_leds_volume_changed
    mode: restart
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Volume Display
          state: True
      - delay: 2s
      - script.execute: 
          id: control_leds
    parameters: {}
  - id: control_leds_center_button_touched
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          id: voice_assistant_leds
          effect: Center Button Touched
          state: True
    mode: single
    parameters: {}
  - id: control_leds_timer_ringing
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          id: voice_assistant_leds
          effect: Timer Ring
          state: True
    mode: single
    parameters: {}
  - id: control_leds_timer_ticking
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Timer tick
          state: True
    mode: single
    parameters: {}
  - id: control_volume
    mode: restart
    parameters: 
      increase_volume: bool
    then: 
      - delay: 16ms
      - if: 
          condition: 
            lambda: !lambda |-
              return increase_volume;
          then: 
            - media_player.volume_up: 
                announcement: False
          else: 
            - media_player.volume_down: 
                announcement: False
      - script.execute: 
          id: control_leds
      - delay: 1s
      - lambda: !lambda |-
          id(dial_touched) = false;
      - sensor.rotary_encoder.set_value: 
          id: dial
          value: 0
      - script.execute: 
          id: control_leds
  - id: control_hue
    mode: restart
    parameters: 
      increase_hue: bool
    then: 
      - delay: 16ms
      - if: 
          condition: 
            lambda: !lambda |-
              return(abs(int(id(dial).state)) > 3 || id(color_changed));
          then: 
            - lambda: !lambda |-
                id(color_changed) = true;
                auto light_color = id(voice_assistant_leds).current_values;
                int hue = 0;
                float saturation = 0;
                float value = 0;
                rgb_to_hsv( light_color.get_red(),
                            light_color.get_green(),
                            light_color.get_blue(),
                            hue,
                            saturation,
                            value);
                if (increase_hue) {
                  hue = (hue + 10) % 360;
                } else {
                  hue = (hue + 350) % 360;
                }
                if (saturation < 0.05) {
                  saturation = 1;
                }
                float red = 0;
                float green = 0;
                float blue = 0;
                hsv_to_rgb( hue,
                            saturation,
                            value,
                            red,
                            green,
                            blue);
                id(voice_assistant_leds).make_call().set_rgb(red, green, blue).perform();
      - script.execute: 
          id: control_leds
      - wait_until: 
          condition: 
            binary_sensor.is_off: 
              
              Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
              id: user_button
      - lambda: !lambda |-
          id(dial_touched) = false;
esp32_improv: [source smartv2-factory.yaml:39]
  
  Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
  authorizer: user_button
  on_start: 
    - then: 
        - lambda: !lambda |-
            id(improv_ble_in_progress) = true;
        - script.execute: 
            id: control_leds
  on_provisioned: 
    - then: 
        - lambda: !lambda |-
            id(improv_ble_in_progress) = false;
        - script.execute: 
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Cloning https://github.com/esphome/home-assistant-voice-pe@dev
INFO Fetching dev
INFO Cloning https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Fetching 48kHz_mic_support
INFO Cloning https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
INFO Fetching main
Failed config

script: [source common/smartv2-base.yaml:612]
  - id: control_leds
    then: 
      - lambda: |-
          id(check_if_timers_active).execute();
          if (id(is_timer_active)){
            id(fetch_first_active_timer).execute();
          }
          if (id(improv_ble_in_progress)) {
            id(control_leds_improv_ble_state).execute();
          } else if (id(init_in_progress)) {
            id(control_leds_init_state).execute();
          } else if (!id(wifi_id).is_connected() || !id(api_id).is_connected()){
            id(control_leds_no_ha_connection_state).execute();
          } else if (id(dial_touched)) {
            id(control_leds_volume_changed).execute();
          } else if (id(timer_ringing).state) {
            id(control_leds_timer_ringing).execute();
          } else if (id(voice_assistant_phase) == 2) {
            id(control_leds_voice_assistant_waiting_for_command_phase).execute();
          } else if (id(voice_assistant_phase) == 3) {
            id(control_leds_voice_assistant_listening_for_command_phase).execute();
          } else if (id(voice_assistant_phase) == 4) {
            id(control_leds_voice_assistant_thinking_phase).execute();
          } else if (id(voice_assistant_phase) == 5) {
            id(control_leds_voice_assistant_replying_phase).execute();
          } else if (id(voice_assistant_phase) == 11) {
            id(control_leds_voice_assistant_error_phase).execute();
          } else if (id(voice_assistant_phase) == 10) {
            id(control_leds_voice_assistant_not_ready_phase).execute();
          } else if (id(is_timer_active)) {
            id(control_leds_timer_ticking).execute();
          } else if (id(voice_assistant_phase) == 1) {
            id(control_leds_voice_assistant_idle_phase).execute();
          }
  - id: control_leds_improv_ble_state
    then: 
      - light.turn_on: 
          brightness: 50%
          red: 100%
          green: 89%
          blue: 71%
          id: voice_assistant_leds
          effect: Twinkle
  - id: control_leds_init_state
    then: 
      - if: 
          condition: 
            wifi.connected: {}
          then: 
            - light.turn_on: 
                brightness: 50%
                red: 9.4%
                green: 73.3%
                blue: 94.9%
                id: voice_assistant_leds
                effect: Twinkle
          else: 
            - light.turn_on: 
                id: voice_assistant_leds
                effect: Rainbow
  - id: control_leds_no_ha_connection_state
    then: 
      - light.turn_on: 
          brightness: 50%
          red: 1
          green: 0
          blue: 0
          id: voice_assistant_leds
          effect: Twinkle
  - id: control_leds_voice_assistant_idle_phase
    then: 
      - light.turn_off: voice_assistant_leds
      - if: 
          condition: 
            light.is_on: led_ring
          then: 
            light.turn_on: led_ring
  - id: control_leds_voice_assistant_waiting_for_command_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Waiting for Command
  - id: control_leds_voice_assistant_listening_for_command_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Listening For Command
  - id: control_leds_voice_assistant_thinking_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Thinking
  - id: control_leds_voice_assistant_replying_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Replying
  - id: control_leds_voice_assistant_error_phase
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          red: 1
          green: 0
          blue: 0
          id: voice_assistant_leds
          effect: Error
  - id: control_leds_voice_assistant_not_ready_phase
    then: 
      - light.turn_on: 
          brightness: 66%
          red: 1
          green: 0
          blue: 0
          id: voice_assistant_leds
          effect: Twinkle
  - id: control_leds_volume_changed
    mode: restart
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Volume Display
      - delay: 2s
      - script.execute: control_leds
  - id: control_leds_center_button_touched
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          id: voice_assistant_leds
          effect: Center Button Touched
  - id: control_leds_timer_ringing
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return min ( max( id(led_ring).current_values.get_brightness() , 0.2f ) + 0.1f , 1.0f );
          id: voice_assistant_leds
          effect: Timer Ring
  - id: control_leds_timer_ticking
    then: 
      - light.turn_on: 
          brightness: !lambda |-
            return max( id(led_ring).current_values.get_brightness() , 0.2f );
          id: voice_assistant_leds
          effect: Timer tick
  - id: control_volume
    mode: restart
    parameters: 
      increase_volume: bool
    then: 
      - delay: 16ms
      - if: 
          condition: 
            lambda: return increase_volume;
          then: 
            - media_player.volume_up: {}
          else: 
            - media_player.volume_down: {}
      - script.execute: control_leds
      - delay: 1s
      - lambda: id(dial_touched) = false;
      - 
        Unable to find action with the name 'sensor.rotary_encoder.set_value'.
        sensor.rotary_encoder.set_value: 
          id: dial
          value: 0
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

esp32_improv: [source smartv2-factory.yaml:39]
  
  Couldn't find ID 'user_button'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "restart_button".
  authorizer: user_button
  on_start: 
    - then: 
        - lambda: !lambda |-
            id(improv_ble_in_progress) = true;
        - script.execute: 
            id: control_leds
  on_provisioned: 
    - then: 
        - lambda: !lambda |-
            id(improv_ble_in_progress) = false;
        - script.execute: 
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

esp32_improv: [source smartv2-factory.yaml:39]
  
  'authorizer' is a required option for [esp32_improv].
  {}
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

light.partition: [source common/smartv2-base.yaml:310]
  platform: partition
  id: voice_assistant_leds
  internal: True
  default_transition_length: 0ms
  segments: 
    - id: leds_internal
      from: 0
      
      TO (31) must be less than the number of LEDs in light 'leds_internal' (16).
      to: 31
      reversed: True
    - id: leds_internal
      from: 32
      to: 42
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

respeaker_lite: [source common/smartv2-base.yaml:996]
  id: respeaker
  reset_pin: 
    number: 2
    mode: 
      output: True
      input: False
      open_drain: False
      pullup: False
      pulldown: False
    inverted: False
    ignore_pin_validation_error: False
    ignore_strapping_warning: False
    drive_strength: 20.0
  mute_state: 
    internal: True
    id: mute_state
    disabled_by_default: False
    name: mute_state
  firmware_version: 
    icon: mdi:application-cog
    name: XMOS firmware version
    internal: False
    id: firmware_version
    disabled_by_default: False
  firmware: 
    url: |-
      https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration/raw/refs/heads/main/respeaker_lite_i2s_dfu_firmware_48k_v1.1.0.bin
    version: 1.1.0
    md5: 9297155d1bf3eb21a9d4db52a89ea0c6
    on_begin: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 0.5
              green: 0.5
              blue: 0.5
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Slow Pulse
              state: True
    on_end: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 0.0
              green: 1.0
              blue: 0.0
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Fast Pulse
              state: True
          - delay: 3s
          - light.turn_off: 
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              state: False
    on_error: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 1.0
              green: 0.0
              blue: 0.0
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Fast Pulse
              state: True
          - delay: 3s
          - light.turn_off: 
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              state: False
  address: 0x42
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

respeaker_lite: [source common/smartv2-base.yaml:996]
  id: respeaker
  reset_pin: 
    number: 2
    mode: 
      output: True
      input: False
      open_drain: False
      pullup: False
      pulldown: False
    inverted: False
    ignore_pin_validation_error: False
    ignore_strapping_warning: False
    drive_strength: 20.0
  mute_state: 
    internal: True
    id: mute_state
    disabled_by_default: False
    name: mute_state
  firmware_version: 
    icon: mdi:application-cog
    name: XMOS firmware version
    internal: False
    id: firmware_version
    disabled_by_default: False
  firmware: 
    url: |-
      https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration/raw/refs/heads/main/respeaker_lite_i2s_dfu_firmware_48k_v1.1.0.bin
    version: 1.1.0
    md5: 9297155d1bf3eb21a9d4db52a89ea0c6
    on_begin: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 0.5
              green: 0.5
              blue: 0.5
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Slow Pulse
              state: True
    on_end: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 0.0
              green: 1.0
              blue: 0.0
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Fast Pulse
              state: True
          - delay: 3s
          - light.turn_off: 
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              state: False
    on_error: 
      - then: 
          - light.turn_on: 
              brightness: 0.5
              red: 1.0
              green: 0.0
              blue: 0.0
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              effect: Fast Pulse
              state: True
          - delay: 3s
          - light.turn_off: 
              
              Couldn't find ID 'led_respeaker_onboard'. Please check you have defined an ID with that name in your configuration. These IDs look similar: "respeaker".
              id: led_respeaker_onboard
              state: False
  address: 0x42
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
Failed config

light.partition: [source common/smartv2-base.yaml:310]
  platform: partition
  id: voice_assistant_leds
  internal: True
  default_transition_length: 0ms
  segments: 
    - id: leds_internal
      from: 1
      to: 8
      reversed: True
    - id: leds_internal
      from: 9
      
      TO (16) must be less than the number of LEDs in light 'leds_internal' (16).
      to: 16
      reversed: True
  effects: 
INFO ESPHome 2025.2.2
INFO Reading configuration smartv2-factory.yaml...
INFO Updating https://github.com/esphome/home-assistant-voice-pe@dev
INFO Updating https://github.com/formatBCE/home-assistant-voice-pe@48kHz_mic_support
INFO Updating https://github.com/formatBCE/Respeaker-Lite-ESPHome-integration@main
INFO Generating C++ source...
INFO Core config, version or integrations changed, cleaning build files...
INFO Cloning https://github.com/espressif/esp-protocols.git@mdns-v1.5.1
INFO Fetching mdns-v1.5.1
INFO Cloning https://github.com/espressif/esp-tflite-micro@v1.3.1
INFO Fetching v1.3.1
INFO Compiling app...
Processing smartv2-satellite (board: esp32-s3-devkitc-1; framework: espidf; platform: https://github.com/pioarduino/platform-espressif32.git#51.03.07)
--------------------------------------------------------------------------------
Library Manager: Installing bblanchon/ArduinoJson @ 6.18.5
INFO Installing bblanchon/ArduinoJson @ 6.18.5
Unpacking  [------------------------------------]    0%Unpacking  [------------------------------------]    1%Unpacking  [------------------------------------]    2%Unpacking  [#-----------------------------------]    3%Unpacking  [#-----------------------------------]    4%Unpacking  [##----------------------------------]    5%Unpacking  [##----------------------------------]    7%Unpacking  [##----------------------------------]    8%Unpacking  [###---------------------------------]    9%Unpacking  [###---------------------------------]   10%Unpacking  [####--------------------------------]   11%Unpacking  [####--------------------------------]   12%Unpacking  [#####-------------------------------]   14%Unpacking  [#####-------------------------------]   15%Unpacking  [#####-------------------------------]   16%Unpacking  [######------------------------------]   17%Unpacking  [######------------------------------]   18%Unpacking  [#######-----------------------------]   19%Unpacking  [#######-----------------------------]   21%Unpacking  [########----------------------------]   22%Unpacking  [########----------------------------]   23%Unpacking  [########----------------------------]   24%Unpacking  [#########---------------------------]   25%Unpacking  [#########---------------------------]   26%Unpacking  [##########--------------------------]   28%Unpacking  [##########--------------------------]   29%Unpacking  [##########--------------------------]   30%Unpacking  [###########-------------------------]   31%Unpacking  [###########-------------------------]   32%Unpacking  [############------------------------]   33%Unpacking  [############------------------------]   35%Unpacking  [#############-----------------------]   36%Unpacking  [#############-----------------------]   37%Unpacking  [#############-----------------------]   38%Unpacking  [##############----------------------]   39%Unpacking  [##############----------------------]   40%Unpacking  [###############---------------------]   42%Unpacking  [###############---------------------]   43%Unpacking  [################--------------------]   44%Unpacking  [################--------------------]   45%Unpacking  [################--------------------]   46%Unpacking  [#################-------------------]   47%Unpacking  [#################-------------------]   49%Unpacking  [##################------------------]   50%Unpacking  [##################------------------]   51%Unpacking  [##################------------------]   52%Unpacking  [###################-----------------]   53%Unpacking  [###################-----------------]   54%Unpacking  [####################----------------]   56%Unpacking  [####################----------------]   57%Unpacking  [#####################---------------]   58%Unpacking  [#####################---------------]   59%Unpacking  [#####################---------------]   60%Unpacking  [######################--------------]   61%Unpacking  [######################--------------]   63%Unpacking  [#######################-------------]   64%Unpacking  [#######################-------------]   65%Unpacking  [########################------------]   66%Unpacking  [########################------------]   67%Unpacking  [########################------------]   69%Unpacking  [#########################-----------]   70%Unpacking  [#########################-----------]   71%Unpacking  [##########################----------]   72%Unpacking  [##########################----------]   73%Unpacking  [##########################----------]   74%Unpacking  [###########################---------]   76%Unpacking  [###########################---------]   77%Unpacking  [############################--------]   78%Unpacking  [############################--------]   79%Unpacking  [#############################-------]   80%Unpacking  [#############################-------]   81%Unpacking  [#############################-------]   83%Unpacking  [##############################------]   84%Unpacking  [##############################------]   85%Unpacking  [###############################-----]   86%Unpacking  [###############################-----]   87%Unpacking  [################################----]   88%Unpacking  [################################----]   90%Unpacking  [################################----]   91%Unpacking  [#################################---]   92%Unpacking  [#################################---]   93%Unpacking  [##################################--]   94%Unpacking  [##################################--]   95%Unpacking  [##################################--]   97%Unpacking  [###################################-]   98%Unpacking  [###################################-]   99%Unpacking  [####################################]  100%
Library Manager: ArduinoJson@6.18.5 has been installed!
INFO ArduinoJson@6.18.5 has been installed!
Library Manager: Installing kahrendt/ESPMicroSpeechFeatures @ 1.1.0
INFO Installing kahrendt/ESPMicroSpeechFeatures @ 1.1.0
Unpacking  [------------------------------------]    0%Unpacking  [------------------------------------]    2%Unpacking  [#-----------------------------------]    4%Unpacking  [##----------------------------------]    7%Unpacking  [###---------------------------------]    9%Unpacking  [####--------------------------------]   11%Unpacking  [#####-------------------------------]   14%Unpacking  [######------------------------------]   16%Unpacking  [######------------------------------]   19%Unpacking  [#######-----------------------------]   21%Unpacking  [########----------------------------]   23%Unpacking  [#########---------------------------]   26%Unpacking  [##########--------------------------]   28%Unpacking  [###########-------------------------]   30%Unpacking  [############------------------------]   33%Unpacking  [############------------------------]   35%Unpacking  [#############-----------------------]   38%Unpacking  [##############----------------------]   40%Unpacking  [###############---------------------]   42%Unpacking  [################--------------------]   45%Unpacking  [#################-------------------]   47%Unpacking  [##################------------------]   50%Unpacking  [##################------------------]   52%Unpacking  [###################-----------------]   54%Unpacking  [####################----------------]   57%Unpacking  [#####################---------------]   59%Unpacking  [######################--------------]   61%Unpacking  [#######################-------------]   64%Unpacking  [########################------------]   66%Unpacking  [########################------------]   69%Unpacking  [#########################-----------]   71%Unpacking  [##########################----------]   73%Unpacking  [###########################---------]   76%Unpacking  [############################--------]   78%Unpacking  [#############################-------]   80%Unpacking  [##############################------]   83%Unpacking  [##############################------]   85%Unpacking  [###############################-----]   88%Unpacking  [################################----]   90%Unpacking  [#################################---]   92%Unpacking  [##################################--]   95%Unpacking  [###################################-]   97%Unpacking  [####################################]  100%
Library Manager: ESPMicroSpeechFeatures@1.1.0 has been installed!
INFO ESPMicroSpeechFeatures@1.1.0 has been installed!
Library Manager: Installing improv/Improv @ 1.2.4
INFO Installing improv/Improv @ 1.2.4
Downloading  [------------------------------------]    0%Downloading  [###############################-----]   88%Downloading  [####################################]  100%
Unpacking  [------------------------------------]    0%Unpacking  [###---------------------------------]    9%Unpacking  [######------------------------------]   18%Unpacking  [#########---------------------------]   27%Unpacking  [#############-----------------------]   36%Unpacking  [################--------------------]   45%Unpacking  [###################-----------------]   54%Unpacking  [######################--------------]   63%Unpacking  [##########################----------]   72%Unpacking  [#############################-------]   81%Unpacking  [################################----]   90%Unpacking  [####################################]  100%
Library Manager: Improv@1.2.4 has been installed!
INFO Improv@1.2.4 has been installed!
Library Manager: Installing esphome/esp-audio-libs @ 1.1.1
INFO Installing esphome/esp-audio-libs @ 1.1.1
Unpacking  [------------------------------------]    0%Unpacking  [#-----------------------------------]    2%Unpacking  [##----------------------------------]    5%Unpacking  [###---------------------------------]    8%Unpacking  [####--------------------------------]   11%Unpacking  [#####-------------------------------]   13%Unpacking  [######------------------------------]   16%Unpacking  [#######-----------------------------]   19%Unpacking  [########----------------------------]   22%Unpacking  [#########---------------------------]   25%Unpacking  [##########--------------------------]   27%Unpacking  [###########-------------------------]   30%Unpacking  [############------------------------]   33%Unpacking  [#############-----------------------]   36%Unpacking  [##############----------------------]   38%Unpacking  [###############---------------------]   41%Unpacking  [################--------------------]   44%Unpacking  [#################-------------------]   47%Unpacking  [##################------------------]   50%Unpacking  [###################-----------------]   52%Unpacking  [####################----------------]   55%Unpacking  [#####################---------------]   58%Unpacking  [######################--------------]   61%Unpacking  [#######################-------------]   63%Unpacking  [########################------------]   66%Unpacking  [#########################-----------]   69%Unpacking  [##########################----------]   72%Unpacking  [###########################---------]   75%Unpacking  [############################--------]   77%Unpacking  [#############################-------]   80%Unpacking  [##############################------]   83%Unpacking  [###############################-----]   86%Unpacking  [################################----]   88%Unpacking  [#################################---]   91%Unpacking  [##################################--]   94%Unpacking  [###################################-]   97%Unpacking  [####################################]  100%
Library Manager: esp-audio-libs@1.1.1 has been installed!
INFO esp-audio-libs@1.1.1 has been installed!
Library Manager: Installing esphome/noise-c @ 0.1.6
INFO Installing esphome/noise-c @ 0.1.6
Unpacking  [------------------------------------]    0%Unpacking  [------------------------------------]    1%Unpacking  [------------------------------------]    2%Unpacking  [#-----------------------------------]    4%Unpacking  [#-----------------------------------]    5%Unpacking  [##----------------------------------]    6%Unpacking  [##----------------------------------]    8%Unpacking  [###---------------------------------]    9%Unpacking  [###---------------------------------]   10%Unpacking  [####--------------------------------]   12%Unpacking  [####--------------------------------]   13%Unpacking  [#####-------------------------------]   14%Unpacking  [#####-------------------------------]   16%Unpacking  [######------------------------------]   17%Unpacking  [######------------------------------]   18%Unpacking  [#######-----------------------------]   20%Unpacking  [#######-----------------------------]   21%Unpacking  [########----------------------------]   22%Unpacking  [########----------------------------]   24%Unpacking  [#########---------------------------]   25%Unpacking  [#########---------------------------]   27%Unpacking  [##########--------------------------]   28%Unpacking  [##########--------------------------]   29%Unpacking  [###########-------------------------]   31%Unpacking  [###########-------------------------]   32%Unpacking  [############------------------------]   33%Unpacking  [############------------------------]   35%Unpacking  [#############-----------------------]   36%Unpacking  [#############-----------------------]   37%Unpacking  [##############----------------------]   39%Unpacking  [##############----------------------]   40%Unpacking  [###############---------------------]   41%Unpacking  [###############---------------------]   43%Unpacking  [################--------------------]   44%Unpacking  [################--------------------]   45%Unpacking  [#################-------------------]   47%Unpacking  [#################-------------------]   48%Unpacking  [##################------------------]   50%Unpacking  [##################------------------]   51%Unpacking  [##################------------------]   52%Unpacking  [###################-----------------]   54%Unpacking  [###################-----------------]   55%Unpacking  [####################----------------]   56%Unpacking  [####################----------------]   58%Unpacking  [#####################---------------]   59%Unpacking  [#####################---------------]   60%Unpacking  [######################--------------]   62%Unpacking  [######################--------------]   63%Unpacking  [#######################-------------]   64%Unpacking  [#######################-------------]   66%Unpacking  [########################------------]   67%Unpacking  [########################------------]   68%Unpacking  [#########################-----------]   70%Unpacking  [#########################-----------]   71%Unpacking  [##########################----------]   72%Unpacking  [##########################----------]   74%Unpacking  [###########################---------]   75%Unpacking  [###########################---------]   77%Unpacking  [############################--------]   78%Unpacking  [############################--------]   79%Unpacking  [#############################-------]   81%Unpacking  [#############################-------]   82%Unpacking  [##############################------]   83%Unpacking  [##############################------]   85%Unpacking  [###############################-----]   86%Unpacking  [###############################-----]   87%Unpacking  [################################----]   89%Unpacking  [################################----]   90%Unpacking  [#################################---]   91%Unpacking  [#################################---]   93%Unpacking  [##################################--]   94%Unpacking  [##################################--]   95%Unpacking  [###################################-]   97%Unpacking  [###################################-]   98%Unpacking  [####################################]  100%
Library Manager: noise-c@0.1.6 has been installed!
INFO noise-c@0.1.6 has been installed!
Library Manager: Resolving dependencies...
INFO Resolving dependencies...
Library Manager: Installing esphome/libsodium @ 1.10018.4
INFO Installing esphome/libsodium @ 1.10018.4
Unpacking  [------------------------------------]    0%Unpacking  [------------------------------------]    1%Unpacking  [------------------------------------]    2%Unpacking  [#-----------------------------------]    3%Unpacking  [#-----------------------------------]    4%Unpacking  [##----------------------------------]    5%Unpacking  [##----------------------------------]    7%Unpacking  [##----------------------------------]    8%Unpacking  [###---------------------------------]    9%Unpacking  [###---------------------------------]   10%Unpacking  [####--------------------------------]   11%Unpacking  [####--------------------------------]   13%Unpacking  [#####-------------------------------]   14%Unpacking  [#####-------------------------------]   15%Unpacking  [#####-------------------------------]   16%Unpacking  [######------------------------------]   17%Unpacking  [######------------------------------]   18%Unpacking  [#######-----------------------------]   20%Unpacking  [#######-----------------------------]   21%Unpacking  [########----------------------------]   22%Unpacking  [########----------------------------]   23%Unpacking  [########----------------------------]   24%Unpacking  [#########---------------------------]   26%Unpacking  [#########---------------------------]   27%Unpacking  [##########--------------------------]   28%Unpacking  [##########--------------------------]   29%Unpacking  [###########-------------------------]   30%Unpacking  [###########-------------------------]   32%Unpacking  [###########-------------------------]   33%Unpacking  [############------------------------]   34%Unpacking  [############------------------------]   35%Unpacking  [#############-----------------------]   36%Unpacking  [#############-----------------------]   37%Unpacking  [##############----------------------]   39%Unpacking  [##############----------------------]   40%Unpacking  [##############----------------------]   41%Unpacking  [###############---------------------]   42%Unpacking  [###############---------------------]   43%Unpacking  [################--------------------]   45%Unpacking  [################--------------------]   46%Unpacking  [#################-------------------]   47%Unpacking  [#################-------------------]   48%Unpacking  [#################-------------------]   49%Unpacking  [##################------------------]   50%Unpacking  [##################------------------]   52%Unpacking  [###################-----------------]   53%Unpacking  [###################-----------------]   54%Unpacking  [####################----------------]   55%Unpacking  [####################----------------]   56%Unpacking  [####################----------------]   58%Unpacking  [#####################---------------]   59%Unpacking  [#####################---------------]   60%Unpacking  [######################--------------]   61%Unpacking  [######################--------------]   62%Unpacking  [#######################-------------]   64%Unpacking  [#######################-------------]   65%Unpacking  [#######################-------------]   66%Unpacking  [########################------------]   67%Unpacking  [########################------------]   68%Unpacking  [#########################-----------]   69%Unpacking  [#########################-----------]   71%Unpacking  [##########################----------]   72%Unpacking  [##########################----------]   73%Unpacking  [##########################----------]   74%Unpacking  [###########################---------]   75%Unpacking  [###########################---------]   77%Unpacking  [############################--------]   78%Unpacking  [############################--------]   79%Unpacking  [#############################-------]   80%Unpacking  [#############################-------]   81%Unpacking  [#############################-------]   83%Unpacking  [##############################------]   84%Unpacking  [##############################------]   85%Unpacking  [###############################-----]   86%Unpacking  [###############################-----]   87%Unpacking  [################################----]   88%Unpacking  [################################----]   90%Unpacking  [################################----]   91%Unpacking  [#################################---]   92%Unpacking  [#################################---]   93%Unpacking  [##################################--]   94%Unpacking  [##################################--]   96%Unpacking  [###################################-]   97%Unpacking  [###################################-]   98%Unpacking  [###################################-]   99%Unpacking  [####################################]  100%
Library Manager: libsodium@1.10018.4 has been installed!
INFO libsodium@1.10018.4 has been installed!
HARDWARE: ESP32S3 240MHz, 320KB RAM, 8MB Flash
 - framework-espidf @ 3.50105.0 (5.1.5) 
 - tool-cmake @ 3.21.3 
 - tool-esptoolpy @ 4.8.1 
 - tool-mklittlefs @ 3.2.0 
 - tool-ninja @ 1.9.0 
 - tool-riscv32-esp-elf-gdb @ 11.2.0+20220823 
 - tool-xtensa-esp-elf-gdb @ 11.2.0+20230208 
 - toolchain-esp32ulp @ 2.35.0-20220830 
 - toolchain-riscv32-esp @ 12.2.0+20230208 
 - toolchain-xtensa-esp32s3 @ 12.2.0+20230208
Reading CMake configuration...
